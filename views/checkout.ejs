<!DOCTYPE html>
<html lang="en">
<head>
  <%- include('./head') %>
  <title>Ticketac - Results</title>
</head>
<body>
  <%- include('./header') %>

  <% if (trips.length < 1) { %>
    <div class="my-3 d-flex flex-column align-items-center">
      <h2 class="text-light text-center">Ooops! No registred trips yet...</h2>
      <a href="/">
        <button type="button" class="btn btn-danger">Home</button>
      </a>
    </div>
  <% } else { %>
    <div class="container narrow">
      <h2 class="mt-5 text-light">My tickets :</h2>
      <div class="mt-3">
        <table class="table">
          <thead>
            <tr>
              <th scope="col">N°</th>
              <th scope="col">journey</th>
              <th scope="col">Date</th>
              <th scope="col">Departure Time</th>
              <th scope="col">Price</th>
            </tr>
          </thead>
          <tbody>
            <% let total = 0;
              trips.forEach((trip, index) => { 
                total += trip.price             %>
                <tr>
                  <th scope="row"><%= index + 1 %></th>
                  <td><%= trip.departure %> / <%= trip.arrival %></td>
                  <td><%= dateFormaterFull(trip.date) %></td>
                  <td><%= trip.departureTimer %></td>
                  <td><%= trip.price %> €</td>
                </tr>
            <% }) %>
            <tr class="table-danger">
              <th colspan="4">Total</th>
              <td><%= total %> €</td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>
  <% } %>


  <%- include('./footer') %>


</body>
</html>